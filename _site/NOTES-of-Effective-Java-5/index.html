<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Effective Java 5 - Enums and Annotations &mdash; Simple, Not Easy</title>
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700,800|Oswald|PT+Mono|Ubuntu+Mono" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/assets/main.css">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/images/logo.jpg"/>
    <link href="/feed.xml" rel="alternate" type="application/rss+xml" title="Simple, Not Easy" />
    <meta name="title" content="Effective Java 5 - Enums and Annotations ">
    <link rel="canonical" href="/NOTES-of-Effective-Java-5">
    
    <link rel="author" href="https://plus.google.com/118230970865161551961">
    <meta property="og:title" content="Effective Java 5 - Enums and Annotations "/>
    <meta property="og:url" content="/NOTES-of-Effective-Java-5"/>
     
    
    <meta property="og:site_name" content="Simple, Not Easy">
    <link rel="stylesheet" href="/bt-responsive.css" type="text/css" media="screen" charset="utf-8">
    <meta name="keywords" content="java">
</head>
<body>

<section class="site-nav">
    <header>
        <nav id="navigation" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
            <a class="brand" href="/">
                <img src="/images/logo.jpg" alt="Inc">
            </a>
            <a href="/">Blog</a>
            
              <a href="/archives.html" >Archives</a>
            
              <a href="/about.html" >About</a>
            
              <a href="/tags.html" >Tags</a>
            
              <a href="http://cast.allenlsy.com" >Casts</a>
            
              <a href="/galleries.html" >Galleries</a>
            
            <i class="icon-feed"></i> <a href="/feed.xml" title="Atom/RSS feed">Feed</a>
        </nav>

    </header>
</section>


<article>

    <div class="container">
        <header>
            <h1 class="title">Effective Java 5 - Enums and Annotations</h1>
            
            <div class="meta">
                <time pubdate datetime="2013-14-May" title="May 14, 2013">May 14, 2013</time>
            </div>
            <div class="tags">
              <a href="/tags/java.html" rel="tag">java</a>
            </div>
            <div class="hidden-seo">
              By <a href="/NOTES-of-Effective-Java-5" title="Effective Java 5 - Enums and Annotations" rel="author">allenlsy</a>
            </div>
        </header>

        <section class="article">
            <p><img src="http://www.crazysmoove.com/memjug/javabooks-slides/images/Effective_Java.jpg" alt="1" />
<br /></p>

<ul>
  <li><a href="#i30">30. Use enums instead of <code>int</code> constants</a></li>
  <li><a href="#i31">31. Use instance fields instead of ordinals</a></li>
  <li><a href="#i32">32. Use <code>EnumSet</code> instead of bit fields</a></li>
  <li><a href="#i33">33. Use <code>EnumMap</code> instead of ordinal indexing</a></li>
  <li><a href="#i34">34. Emulate extensible enums with interfaces</a></li>
  <li><a href="#i35">35. Prefer annotation to naming patterns(naming convention)</a></li>
  <li><a href="#i36">36. Consistenly use the <code>Override</code> annotation</a></li>
  <li><a href="#i37">37. Use marker interfaces to define types</a></li>
</ul>

<hr />

<h2 id="i30">30. Use enums instead of <code>int</code> constants</h2>

<div class="highlight"><pre><code class="java"><span class="kd">public</span> <span class="kd">enum</span> <span class="n">Apple</span> <span class="o">{</span> <span class="n">FUJI</span><span class="o">,</span> <span class="n">PIPPIN</span><span class="o">,</span> <span class="n">GRANNY_SMITH</span> <span class="o">};</span>
</code></pre></div>

<h4 id="adding-methods-to-enum">Adding methods to enum</h4>

<div class="highlight"><pre><code class="java"><span class="kd">public</span> <span class="kd">enum</span> <span class="n">Sample</span> <span class="o">{</span>
	<span class="n">Obj1</span> <span class="o">(</span><span class="mf">1.0</span><span class="o">,</span> <span class="mf">2.0</span><span class="o">),</span>
	<span class="n">Obj2</span> <span class="o">(</span><span class="mf">3.0</span><span class="o">,</span> <span class="mf">4.0</span><span class="o">),</span>
	<span class="n">Obj3</span> <span class="o">(</span><span class="mf">5.0</span><span class="o">,</span> <span class="mf">6.0</span><span class="o">);</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">a</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">b</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">c</span> <span class="o">=</span> <span class="mf">2.3</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">d</span><span class="o">;</span>


	<span class="c1">// constructor</span>
	<span class="n">Sample</span><span class="o">(</span><span class="kt">double</span> <span class="n">a</span><span class="o">,</span> <span class="kt">double</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">b</span> <span class="o">=</span> <span class="n">b</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">c</span><span class="o">-</span><span class="n">b</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">double</span> <span class="nf">a</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">a</span><span class="o">;</span> <span class="o">}</span>
	<span class="kd">public</span> <span class="kt">double</span> <span class="nf">b</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">b</span><span class="o">;</span> <span class="o">}</span>
	<span class="kd">public</span> <span class="kt">double</span> <span class="nf">d</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">d</span><span class="o">;</span> <span class="o">}</span>


<span class="o">}</span>
</code></pre></div>

<p><strong>Pay attention</strong> to the sign after <code>Obj1</code> and <code>Obj3</code>. One is <code>,</code>, the other is <code>;</code>.</p>

<div class="highlight"><pre><code class="java"><span class="kd">public</span> <span class="kd">enum</span> <span class="n">Operation</span> <span class="o">{</span>
	<span class="n">PLUS</span><span class="o">,</span> <span class="n">MINUS</span><span class="o">,</span> <span class="n">TIMES</span><span class="o">,</span> <span class="n">DIVIDE</span><span class="o">;</span>

	<span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">switch</span><span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">case</span> <span class="nl">PLUS:</span> <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">;</span>
			<span class="k">case</span> <span class="nl">MINUS:</span> <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="o">;</span>
			<span class="k">case</span> <span class="nl">TIMES:</span> <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="o">;</span>
			<span class="k">case</span> <span class="nl">DIVIDE:</span> <span class="k">return</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span><span class="o">;</span>
			<span class="k">default</span><span class="o">:</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">AssertionError</span><span class="o">(</span><span class="s">&quot;Unknown op: &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

<p><code>this</code> here refers to the enum value.</p>

<p>This piece of code, if we add a new operation, we need to modify <code>apply()</code>. It’s not flexible.</p>

<div class="highlight"><pre><code class="java"><span class="kd">public</span> <span class="kd">enum</span> <span class="n">Operation</span> <span class="o">{</span>
	<span class="n">PLUS</span><span class="o">(</span><span class="s">&quot;+&quot;</span><span class="o">)</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">;</span> <span class="o">}</span> <span class="o">},</span>
	<span class="n">MINUS</span><span class="o">(</span><span class="s">&quot;-&quot;</span><span class="o">)</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span> <span class="o">;</span> <span class="o">}</span> <span class="o">},</span>
	<span class="n">TIMES</span><span class="o">(</span><span class="s">&quot;*&quot;</span><span class="o">)</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">;</span> <span class="o">}</span> <span class="o">},</span>
	<span class="n">DIVIDE</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span> <span class="o">;</span> <span class="o">}</span> <span class="o">};</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">symbol</span><span class="o">;</span>

	<span class="n">Operation</span><span class="o">(</span><span class="n">String</span> <span class="n">symbol</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">symbol</span> <span class="o">=</span> <span class="n">symbol</span><span class="o">;</span> <span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">symbol</span><span class="o">;</span> <span class="o">}</span>

	<span class="kd">abstract</span> <span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>

<p>The <code>abstract</code> method in enum must be implemented by enum value.</p>

<p>Another good trick is, since we have a <code>toString()</code> method here, we can have a reverse operation for it called <code>fromString()</code>. <code>PLUS.toString()</code> returns <code>+</code>, so <code>Operation.fromString("+")</code> should return <code>PLUS</code>.</p>

<div class="highlight"><pre><code class="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Operation</span><span class="o">&gt;</span> <span class="n">stringToEnum</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Operation</span><span class="o">&gt;();</span>

<span class="kd">static</span> <span class="o">{</span>
	<span class="k">for</span> <span class="o">(</span><span class="n">Operation</span> <span class="n">op</span> <span class="o">:</span> <span class="n">values</span><span class="o">()</span> <span class="o">)</span>
		<span class="n">stringToEnum</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">op</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span> <span class="n">op</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="n">Operation</span> <span class="nf">fromString</span><span class="o">(</span><span class="n">String</span> <span class="n">symbol</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">return</span> <span class="n">stringToEnum</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">symbol</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>

<p><strong>Pay attention</strong>, THE ORDER of <code>static</code> block and the method MATTERS here.</p>

<h4 id="strategy-design-pattern-using-enum">Strategy Design Pattern using enum</h4>

<p>Here is a program counting the payroll. The payroll is different for weekdays and weekends.</p>

<p>The policy is:</p>

<ul>
  <li>If work on weekday and worked less than 8 hours, then will be paid <code>hours*payRate</code>.</li>
  <li>If work on weekday and more than 8 hours, then wiil be paid <code>8*payRate + (hours - 8)*payRate / 2</code></li>
  <li>If work on weekend, then will be paid <code>hours*payRate/2</code></li>
</ul>

<div class="highlight"><pre><code class="java"><span class="kd">enum</span> <span class="n">PayrollDay</span> <span class="o">{</span>
	<span class="n">MONDAY</span><span class="o">(</span><span class="n">PayType</span><span class="o">.</span><span class="na">WEEKDAY</span><span class="o">),</span>
	<span class="n">TUESDAY</span><span class="o">(</span><span class="n">PayType</span><span class="o">.</span><span class="na">WEEKDAY</span><span class="o">),</span>
	<span class="n">WEDNESDAY</span><span class="o">(</span><span class="n">PayType</span><span class="o">.</span><span class="na">WEEKDAY</span><span class="o">),</span>
	<span class="n">THURSDAY</span><span class="o">(</span><span class="n">PayType</span><span class="o">.</span><span class="na">WEEKDAY</span><span class="o">),</span>
	<span class="n">FRIDAY</span><span class="o">(</span><span class="n">PayType</span><span class="o">.</span><span class="na">WEEKDAY</span><span class="o">),</span>
	<span class="n">SATURDAY</span><span class="o">(</span><span class="n">PayType</span><span class="o">.</span><span class="na">WEEKEND</span><span class="o">),</span>
	<span class="n">SUNDAY</span><span class="o">(</span><span class="n">PayType</span><span class="o">.</span><span class="na">WEEKEND</span><span class="o">);</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="n">PayType</span><span class="o">;</span>
	<span class="n">PayrollDay</span><span class="o">(</span><span class="n">PayType</span> <span class="n">payType</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">payType</span> <span class="o">=</span> <span class="n">payType</span><span class="o">;</span> <span class="o">}</span>

	<span class="kt">double</span> <span class="nf">pay</span><span class="o">(</span><span class="kt">double</span> <span class="n">hoursWorked</span><span class="o">,</span> <span class="kt">double</span> <span class="n">payRate</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">payType</span><span class="o">.</span><span class="na">pay</span><span class="o">(</span><span class="n">hoursWorked</span><span class="o">,</span> <span class="n">payRate</span><span class="o">);</span>
	<span class="o">}</span>
	
	<span class="kd">private</span> <span class="kd">enum</span> <span class="n">PayType</span> <span class="o">{</span>
		<span class="n">WEEKDAY</span> <span class="o">{</span>
			<span class="kt">double</span> <span class="nf">overtimePay</span><span class="o">(</span><span class="kt">double</span> <span class="n">hours</span><span class="o">,</span> <span class="kt">double</span> <span class="n">payRate</span><span class="o">)</span> <span class="o">{</span>
				<span class="k">return</span> <span class="n">hours</span> <span class="o">&lt;=</span> <span class="n">HOURS_PER_SHIFT</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="o">(</span><span class="n">hours</span> <span class="o">-</span> <span class="n">HOURS_PER_SHIFT</span><span class="o">)</span> <span class="o">*</span> <span class="n">payRate</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>
			<span class="o">}</span>
		<span class="o">},</span>
		<span class="n">WEEKEND</span> <span class="o">{</span>
			<span class="kt">double</span> <span class="nf">overtimePay</span><span class="o">(</span><span class="kt">double</span> <span class="n">hours</span><span class="o">,</span> <span class="kt">double</span> <span class="n">payRate</span><span class="o">)</span> <span class="o">{</span>
				<span class="k">return</span> <span class="n">hours</span> <span class="o">*</span> <span class="n">payRate</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>
			<span class="o">}</span>
		<span class="o">};</span>

		<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">HOURS_PER_SHIFT</span> <span class="o">=</span> <span class="mi">8</span><span class="o">;</span>

		<span class="kd">abstract</span> <span class="kt">double</span> <span class="nf">overtimePay</span><span class="o">(</span><span class="kt">double</span> <span class="n">hours</span><span class="o">,</span> <span class="kt">double</span> <span class="n">payRate</span><span class="o">);</span>

		<span class="kt">double</span> <span class="nf">pay</span><span class="o">(</span><span class="kt">double</span> <span class="n">hoursWorked</span><span class="o">,</span> <span class="kt">double</span> <span class="n">payRate</span><span class="o">)</span> <span class="o">{</span>
			<span class="kt">double</span> <span class="n">basePay</span> <span class="o">=</span> <span class="n">hoursWorked</span> <span class="o">*</span> <span class="n">payRate</span><span class="o">;</span>
			<span class="k">return</span> <span class="n">basePay</span> <span class="o">+</span> <span class="n">overtimePay</span><span class="o">(</span><span class="n">hoursWorked</span><span class="o">,</span> <span class="n">payRate</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

<p><code>PayrollDay</code> has certain <code>PayType</code>, <code>PayType</code> has a method <code>pay()</code>, each <code>PayType</code> has its own <code>overtimePay()</code>.</p>

<h2 id="i31">31. Use instance fields instead of ordinals</h2>

<p>Never derive a value associated with an enum from its ordinal; store it in an instance field instead.</p>

<div class="highlight"><pre><code class="java"><span class="kd">public</span> <span class="kd">enum</span> <span class="n">Ensemble</span> <span class="o">{</span>
	<span class="n">SOLO</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="n">DUET</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="n">TRIO</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span> <span class="n">QUARTET</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">numberOfMusicians</span><span class="o">;</span>
	<span class="n">Ensemble</span><span class="o">(</span><span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">,</span><span class="n">numberOfMusicians</span> <span class="o">=</span> <span class="n">size</span><span class="o">;</span> <span class="o">}</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">numberOfMusicians</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">numberOfMusicians</span><span class="o">;</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

<h2 id="i32">32. Use <code>EnumSet</code> instead of bit fields</h2>

<p>When using bit fields:</p>

<div class="highlight"><pre><code class="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Text</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">STYLE_BOLD</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">STYLE_BOLD</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">STYLE_BOLD</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">STYLE_BOLD</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyStyles</span><span class="o">()</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>

<span class="o">}</span>

<span class="n">text</span><span class="o">.</span><span class="na">applyStyles</span><span class="o">(</span><span class="n">STYLE_BOLD</span> <span class="o">|</span> <span class="n">STYLE_ITALIC</span><span class="o">);</span>
</code></pre></div>

<p>Try to use <code>EnumSet</code></p>

<div class="highlight"><pre><code class="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Text</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">enum</span> <span class="n">Style</span> <span class="o">{</span> <span class="n">BOLD</span><span class="o">,</span> <span class="n">ITALIC</span><span class="o">,</span> <span class="n">UNDERLINE</span><span class="o">,</span> <span class="n">STRIKETHROUGH</span> <span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyStyles</span><span class="o">(</span><span class="n">Set</span><span class="o">&lt;</span> <span class="n">Style</span> <span class="o">&gt;</span> <span class="n">styles</span><span class="o">)</span> <span class="o">{</span> <span class="o">..</span> <span class="o">}</span>
<span class="o">}</span>

<span class="n">text</span><span class="o">.</span><span class="na">applyStyles</span><span class="o">(</span><span class="n">EnumSet</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">Style</span><span class="o">.</span><span class="na">BOLD</span><span class="o">,</span> <span class="n">Style</span><span class="o">.</span><span class="na">ITALIC</span><span class="o">)</span> <span class="o">);</span>
</code></pre></div>

<h2 id="i33">33. Use <code>EnumMap</code> instead of ordinal indexing</h2>

<p>DON’T USE <code>ordinal()</code> in enum.</p>

<div class="highlight"><pre><code class="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Herb</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">enum</span> <span class="n">Type</span> <span class="o">{</span> <span class="n">A</span><span class="o">,</span> <span class="n">B</span><span class="o">,</span> <span class="n">C</span> <span class="o">}</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="n">Type</span> <span class="n">type</span><span class="o">;</span>

	<span class="n">Berb</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Type</span> <span class="n">type</span> <span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">type</span> <span class="o">=</span> <span class="n">type</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Then we have some herbs</span>

<span class="n">Herb</span><span class="o">[]</span> <span class="n">garden</span> <span class="o">=</span> <span class="o">...;</span>

<span class="n">Set</span><span class="o">&lt;</span> <span class="n">Herb</span> <span class="o">&gt;[]</span> <span class="n">herbsByType</span> <span class="o">=</span> <span class="o">(</span><span class="n">Set</span><span class="o">&lt;</span> <span class="n">Herb</span> <span class="o">&gt;[])</span> <span class="k">new</span> <span class="n">Set</span><span class="o">[</span><span class="n">Herb</span><span class="o">.</span><span class="na">Type</span><span class="o">.</span><span class="na">values</span><span class="o">().</span><span class="na">length</span><span class="o">];</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">herbsByType</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
	<span class="n">herbsByType</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span> <span class="n">Herb</span> <span class="o">&gt;();</span>

<span class="k">for</span> <span class="o">(</span><span class="n">Herb</span> <span class="n">h</span> <span class="o">:</span> <span class="n">garden</span><span class="o">)</span>
	<span class="n">herbsByType</span><span class="o">[</span> <span class="n">h</span><span class="o">.</span><span class="na">type</span><span class="o">.</span><span class="na">ordinal</span><span class="o">()</span> <span class="o">].</span><span class="na">add</span><span class="o">(</span><span class="n">h</span><span class="o">);</span> <span class="c1">// DON&#39;T USE ordinal()</span>
</code></pre></div>

<p>Using array with generic is unsafe. Better way to do this is is to use <code>EnumMap</code>:</p>

<div class="highlight"><pre><code class="java"><span class="n">Map</span><span class="o">&lt;</span> <span class="n">Herb</span><span class="o">.</span><span class="na">Type</span><span class="o">,</span> <span class="n">Set</span><span class="o">&lt;</span> <span class="n">Herb</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">herbsByType</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EnumMap</span><span class="o">&lt;</span> <span class="n">Herb</span><span class="o">.</span><span class="na">Type</span><span class="o">,</span> <span class="n">Set</span><span class="o">&lt;</span> <span class="n">Herb</span> <span class="o">&gt;</span> <span class="o">&gt;(</span><span class="n">Herb</span><span class="o">.</span><span class="na">Type</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="k">for</span> <span class="o">(</span><span class="n">Herb</span><span class="o">.</span><span class="na">Type</span> <span class="n">t</span> <span class="o">:</span> <span class="n">Herb</span><span class="o">.</span><span class="na">Type</span><span class="o">.</span><span class="na">values</span><span class="o">()</span> <span class="o">)</span>
	<span class="n">herbsByType</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">t</span><span class="o">,</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span> <span class="n">Herb</span> <span class="o">&gt;()</span> <span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="n">Herb</span> <span class="n">h</span> <span class="o">:</span> <span class="n">garden</span><span class="o">)</span>
	<span class="n">herbsByType</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">type</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="n">h</span><span class="o">);</span>
</code></pre></div>

<h2 id="i34">34. Emulate extensible enums with interfaces</h2>

<p>Sometimes we want to make enum like class, have inheritance. Take the <code>Operation</code> enum in <a href="#i30">#30</a> as an example.</p>

<div class="highlight"><pre><code class="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Operation</span> <span class="o">{</span> 
	<span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="n">BasicOperation</span> <span class="kd">implements</span> <span class="n">Operation</span> <span class="o">{</span>
	<span class="n">PLUS</span><span class="o">(</span><span class="s">&quot;+&quot;</span><span class="o">)</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">double</span> <span class="n">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">;</span> <span class="o">}</span> <span class="o">},</span>
	<span class="n">MINUS</span><span class="o">(</span><span class="s">&quot;-&quot;</span><span class="o">)</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">double</span> <span class="n">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="o">;</span> <span class="o">}</span> <span class="o">},</span>
	<span class="n">TIMES</span><span class="o">(</span><span class="s">&quot;*&quot;</span><span class="o">)</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">double</span> <span class="n">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="o">;</span> <span class="o">}</span> <span class="o">},</span>
	<span class="n">DIVIDE</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">double</span> <span class="n">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span><span class="o">;</span> <span class="o">}</span> <span class="o">};</span>
	
	<span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">symbol</span><span class="o">;</span>

	<span class="n">BasicOperation</span><span class="o">(</span><span class="n">String</span> <span class="n">symbol</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">symbol</span> <span class="o">=</span> <span class="n">symbol</span><span class="o">;</span> <span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">symbol</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span>

<span class="c1">// Extend from BasicOperation</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="n">ExtendedOperation</span> <span class="kd">implements</span> <span class="n">Operation</span> <span class="o">{</span>
	<span class="n">EXP</span><span class="o">(</span><span class="s">&quot;^&quot;</span><span class="o">)</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">double</span> <span class="n">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span> <span class="o">}</span> <span class="o">},</span>
	<span class="n">REMAINDER</span><span class="o">(</span><span class="s">&quot;%&quot;</span><span class="o">)</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">double</span> <span class="n">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">%</span> <span class="n">y</span><span class="o">;</span> <span class="o">}</span> <span class="o">};</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">symbol</span><span class="o">;</span>

	<span class="n">ExtendedOperation</span><span class="o">(</span><span class="n">String</span> <span class="n">symbol</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">symbol</span> <span class="o">=</span> <span class="n">symbol</span><span class="o">;</span> <span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">symbol</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span> <span class="o">)</span>
<span class="o">{</span>
	<span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">1.1</span><span class="o">;</span>
	<span class="kt">double</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">2.2</span><span class="o">;</span>

	<span class="n">test</span><span class="o">(</span><span class="n">ExtendedOperation</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span> <span class="kd">extends</span> <span class="n">Enum</span><span class="o">&lt;</span> <span class="n">T</span> <span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">Operation</span> <span class="o">&gt;</span> <span class="kt">void</span> <span class="n">test</span><span class="o">(</span> <span class="n">Class</span><span class="o">&lt;</span> <span class="n">T</span> <span class="o">&gt;</span> <span class="n">opSet</span><span class="o">,</span> <span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">for</span> <span class="o">(</span><span class="n">Operation</span> <span class="n">op</span> <span class="o">:</span> <span class="n">opSet</span><span class="o">.</span><span class="na">getEnumConstants</span><span class="o">())</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&quot;%f %s %f = %f\n&quot;</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">op</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">op</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="o">);</span>
<span class="o">}</span>
</code></pre></div>

<p>This will output <code>^</code> and <code>%</code> operation result.</p>

<p>We use interface and implement the interface with enum to extends enum.</p>

<h2 id="i35">35. Prefer annotation to naming patterns(naming convention)</h2>

<p>Naming convention in Java has several disadvantages:</p>

<ol>
  <li>Typo leads to error</li>
  <li>There is no way to ensure that they are used only on appropriate program elements.</li>
  <li>They provide no good way to associate parameter values with progarm elements.</li>
</ol>

<h4 id="example-marker-annotation">Example: marker annotation</h4>

<div class="highlight"><pre><code class="java"><span class="lineno"> 1</span> <span class="nd">@Retention</span><span class="o">(</span><span class="n">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span> <span class="c1">// Test annotations should be retained at runtime</span>
<span class="lineno"> 2</span> <span class="nd">@Target</span><span class="o">(</span><span class="n">ElementType</span><span class="o">.</span><span class="na">METHOD</span><span class="o">)</span> <span class="c1">// Test annotation is legal only on method declarations</span>
<span class="lineno"> 3</span> <span class="kd">public</span> <span class="nd">@interface</span> <span class="n">Test</span> <span class="o">{</span>	
<span class="lineno"> 4</span> <span class="o">}</span>	
<span class="lineno"> 5</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Sample</span> <span class="o">{</span>
<span class="lineno"> 6</span>   <span class="nd">@Test</span> 
<span class="lineno"> 7</span>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">m1</span><span class="o">()</span> <span class="o">{}</span> <span class="c1">// test should pass</span>
<span class="lineno"> 8</span>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">m2</span><span class="o">()</span> <span class="o">{}</span>			
<span class="lineno"> 9</span>   <span class="nd">@Test</span>
<span class="lineno">10</span>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">m3</span><span class="o">()</span> <span class="o">{</span>
<span class="lineno">11</span> 	 <span class="n">thorw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">&quot;Boom&quot;</span><span class="o">);</span> <span class="c1">// test should fail</span>
<span class="lineno">12</span>   <span class="o">}</span>
<span class="lineno">13</span> <span class="o">}</span>
</code></pre></div>

<p><code>Test</code> annotation only provides information for use by interested programs. For testing frameworks, they may use the annotations:</p>

<div class="highlight"><pre><code class="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RunTests</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[])</span> <span class="k">throw</span> <span class="n">Exception</span> <span class="o">{</span>
		<span class="kt">int</span> <span class="n">tests</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
		<span class="kt">int</span> <span class="n">passed</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

		<span class="n">Class</span> <span class="n">testClass</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
		<span class="k">for</span> <span class="o">(</span><span class="n">Method</span> <span class="n">m</span> <span class="o">:</span> <span class="n">testClass</span><span class="o">.</span><span class="na">getDeclaredMethods</span><span class="o">()</span> <span class="o">)</span> <span class="o">{</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">isAnnotationPresent</span><span class="o">(</span><span class="n">Test</span><span class="o">.</span><span class="na">class</span><span class="o">))</span> <span class="o">{</span>
				<span class="n">tests</span><span class="o">++;</span>
				<span class="k">try</span> <span class="o">{</span>
					<span class="n">m</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
					<span class="n">passed</span><span class="o">++;</span>
				<span class="o">}</span>
				<span class="k">catch</span> <span class="o">(</span><span class="n">InvocationTargetException</span> <span class="n">wrappedExc</span><span class="o">)</span> <span class="o">{</span>
					<span class="n">Throwable</span> <span class="n">exc</span> <span class="o">=</span> <span class="n">wrappedExc</span><span class="o">.</span><span class="na">getCause</span><span class="o">();</span>
					<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">m</span> <span class="o">+</span> <span class="s">&quot; failed: &quot;</span> <span class="o">+</span> <span class="n">exc</span><span class="o">);</span>
				<span class="o">}</span>
				<span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">exc</span><span class="o">)</span> <span class="o">{</span>
					<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;INVALID @Test: &quot;</span> <span class="o">+</span> <span class="n">m</span><span class="o">);</span>
				<span class="o">}</span>			
			<span class="o">}</span>
		<span class="o">}</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&quot;Passed: %d, Failed: %d%n&quot;</span><span class="o">,</span> <span class="n">passed</span><span class="o">,</span> <span class="n">tests</span> <span class="o">-</span> <span class="n">passed</span><span class="o">);</span> 
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

<p>This program checked <code>isAnnotationPresent(Test.class)</code>, to perform certain job.</p>

<h2 id="i36">36. Consistenly use the <code>Override</code> annotation</h2>

<p>Avoid making mistakes.</p>

<h2 id="i37">37. Use marker interfaces to define types</h2>

<p><strong>Marker interface</strong> is the interface like <code>Serializable</code>.</p>

<p>Marker interfaces has some advantages over annotation:</p>

<h4 id="marker-interfaces-define-a-type-that-is-implemented-by-instances-of-the-marked-class-while-marker-annotations-do-not">1. marker interfaces define a type that is implemented by instances of the marked class, while marker annotations do not.</h4>

<p>This allows you to get some programming error in compilation time.</p>

<p>A bad thing in Java API is, the creator of <code>ObjectOutputStream</code> didn’t use <code>Serializable</code> in <code>writeObject(Object obj)</code> method. The parameter should be <code>Serializable</code>.</p>

<h4 id="marker-interfaces-can-be-targeted-more-precisely">2. marker interfaces can be targeted more precisely.</h4>

<p>Annoation may be applied to any type, wilhe interface may have some restriction.</p>

<p><code>Set</code> interface can be applied to only subclass of <code>Collection</code> </p>

<h4 id="it-is-possible-to-add-more-information-to-an-annotation-type-after-it-is-already-in-use-by-adding-one-or-more-annotation-type-elements-with-defaults">3. It is possible to add more information to an annotation type after it is already in use, by adding one or more annotation type elements with defaults.</h4>

<h4 id="they-are-part-of-the-larger-annotation-facility">4. They are part of the larger annotation facility.</h4>

<h3 id="when-to-use-annotation-or-marker-interface">When to use annotation or marker interface?</h3>

<p>If marking an element inside the class, then we can only use annotation. I marking a class, one interface can implement the functionality of many annotations. </p>

<p>If you want to define a type here, use interface.</p>


        </section>
        <section class="article">
          <hr>
          <h4>Share this article</h4>
          
<div class="social">
    <div>
        <a href="https://twitter.com/share" class="twitter-share-button"  data-text="Effective Java 5 - Enums and Annotations" data-related="allenlsy">Tweet</a>
    </div>
    
    
    <div>
        <div class="fb-like" data-width="150" data-layout="button_count" data-action="like" data-show-faces="true" data-send="false"></div>
    </div>
    
    
    <div>
        <div class="g-plusone" data-size="medium"></div>
    </div>
    
    
    
    <div>
        <a href="http://news.ycombinator.com/submit" class="hn-share-button">Vote on HN</a>
    </div>
    
</div>

        </section>
        <section class="row">
          <hr>
          <div class="col-md-6">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'allenlsy'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
          </div>
          <div class="col-md-6">
            <div id="duoshuo_thread" class="ds-thread"></div>
<!-- Duoshuo Comment BEGIN -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"allenlsy21"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
</script>
<!-- Duoshuo Comment END -->

          </div>
        </section>
    </div>
</article>


<footer class="site-footer">
    <div class="container">
      copy; 2014 &nbsp; 

        <nav>
            <a href="http://allenlsy.com">Blog</a> &middot;
            <a href="http://cast.allenlsy.com">Casts</a> &middot;
            
            
        </nav>

        <nav class="social">
            
            <a href="https://twitter.com/allenlsy" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter black"></i></a>
            
            
            <a href="http://facebook.com/allenlsy" title="Follow on Facebook" target="_blank"><i class="icon icon-facebook black"></i></a>
            
            <a href="/feed.xml" title="RSS Feed">
                <i class="icon icon-rss black"></i>
            </a>
        </nav>
    </div>
</footer>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="/assets/main.js"></script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=253595308025739";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<script>
    (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = '//hnbutton.appspot.com/static/hn.min.js';
        s.parentNode.insertBefore(g, s);
    }(document, 'script'));
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24647338-1', '');
  ga('send', 'pageview');
</script>




</body>
</html>
